<mat-card>
  <mat-card-header>
    <mat-card-title>Forgot password</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form
      [formGroup]="forgotPasswordForm"
      *ngIf="!changePasswordVisibilityFlag"
    >
      <!-- Question -->
      <mat-form-field>
        <mat-label>Security question</mat-label>
        <input
          matInput
          readonly="true"
          [value]="securityQuestions[0].question"
        />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Reply</mat-label>
        <input matInput formControlName="response" />
        <mat-error
          *ngIf="forgotPasswordForm.controls['response'].errors?.['required']"
          >This field is required</mat-error
        >
      </mat-form-field>
    </form>
    <form [formGroup]="changePasswordForm" *ngIf="changePasswordVisibilityFlag">
      <!--- Password section-->
      <mat-form-field>
        <mat-label> Password </mat-label>
        <input
          onkeypress="return event.charCode != 32"
          [type]="passwordVisible ? 'text' : 'password'"
          matInput
          formControlName="password"
        />
        <mat-icon matSuffix (click)="passwordVisible = !passwordVisible">{{
          passwordVisible ? "visibility_off" : "visibility"
        }}</mat-icon>
        <mat-error>This field is required</mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label> Confirm password </mat-label>
        <input
          onkeypress="return event.charCode != 32"
          [type]="confirmPasswordVisible ? 'text' : 'password'"
          matInput
          formControlName="confirmPassword"
        />
        <mat-icon
          matSuffix
          (click)="confirmPasswordVisible = !confirmPasswordVisible"
          >{{
            confirmPasswordVisible ? "visibility_off" : "visibility"
          }}</mat-icon
        >
        <mat-error
          *ngIf="changePasswordForm.controls['confirmPassword'].errors?.['required']"
          >This field is required</mat-error
        >
        <mat-error
          *ngIf="changePasswordForm.controls['confirmPassword'].errors?.['noMatch']"
          >Passwords doesn't match</mat-error
        >
      </mat-form-field>
    </form>
  </mat-card-content>
  <mat-card-actions align="end">
    <button mat-button routerLink="..">Back</button>

    <div style="flex-grow: 100"></div>

    <button
      mat-button
      color="primary"
      *ngIf="!changePasswordVisibilityFlag"
      (click)="answer()"
    >
      Answer
    </button>
    <button
      mat-button
      color="primary"
      *ngIf="changePasswordVisibilityFlag"
      (click)="changePassword()"
    >
      Change password
    </button>
  </mat-card-actions>
</mat-card>
